<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Componente Destructor</title>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="destructor.js"></script>
    
    <style>
        .instrucciones {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            font-family: Arial, sans-serif;
            z-index: 100;
        }
        
        .titulo {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            font-family: Arial, sans-serif;
            z-index: 100;
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="titulo">Componente Destructor</div>
    
    <div class="instrucciones">
        Demostración del componente Destructor.<br>
        La cámara emite un rayo que destruye<br>
        los objetos de la clase "destructible".<br>
        Usa W/A/S/D para moverte y el ratón para mirar.
    </div>

    <a-scene>
        <!-- Cámara con el componente destructor integrado -->
        <a-entity position="0 1.6 0" 
                  camera 
                  look-controls 
                  wasd-controls="fly: true">
            <!-- Rayo destructor adjunto a la cámara -->
            <a-entity destructor="objetivo: destructible; 
                                  direccion: 0 0 -1; 
                                  cerca: 0; 
                                  lejos: 10; 
                                  color: #FF0000">
            </a-entity>
            
            <!-- Visor/puntero para la cámara -->
            <a-entity position="0 0 -1" 
                      geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02" 
                      material="color: #FF0000; shader: flat; opacity: 0.8">
            </a-entity>
        </a-entity>
        
        <!-- Objetos destructibles (con la clase "destructible") con animaciones -->
        <a-entity id="objetos-destructibles">
            <!-- Fila frontal -->
            <a-box class="destructible" id="cubo1" position="-3 1 -5" 
                  width="1" height="1" depth="1" 
                  material="color: #4CC3D9; metalness: 0.3; roughness: 0.4"
                  animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear">
            </a-box>
            
            <a-box class="destructible" id="cubo2" position="0 1 -5" 
                  width="1" height="1" depth="1" 
                  material="color: #EF2D5E; metalness: 0.3; roughness: 0.4"
                  animation="property: position; to: 0 2 -5; dir: alternate; loop: true; dur: 2000; easing: easeInOutSine">
            </a-box>
            
            <a-box class="destructible" id="cubo3" position="3 1 -5" 
                  width="1" height="1" depth="1" 
                  material="color: #FFC65D; metalness: 0.3; roughness: 0.4"
                  animation="property: scale; to: 1.2 1.2 1.2; dir: alternate; loop: true; dur: 1500; easing: easeInOutQuad">
            </a-box>
            
            <!-- Fila trasera -->
            <a-box class="destructible" id="cubo4" position="-2 1 -8" 
                  width="1" height="1" depth="1" 
                  material="color: #7BC8A4; metalness: 0.3; roughness: 0.4; emissive: #7BC8A4"
                  animation="property: material.emissiveIntensity; from: 0; to: 0.5; dir: alternate; loop: true; dur: 1000">
            </a-box>
            
            <a-box class="destructible" id="cubo5" position="2 1 -8" 
                  width="1" height="1" depth="1" 
                  material="color: #BBBBFF; metalness: 0.3; roughness: 0.4"
                  animation="property: rotation; to: 360 0 0; loop: true; dur: 6000; easing: linear">
            </a-box>
            
            <!-- Objetos a diferentes alturas -->
            <a-box class="destructible" id="cubo6" position="-1 3 -6" 
                  width="1" height="1" depth="1" 
                  material="color: #FF6B6B; metalness: 0.3; roughness: 0.4"
                  animation="property: rotation; to: 0 0 360; loop: true; dur: 7000; easing: linear">
            </a-box>
            
            <a-box class="destructible" id="cubo7" position="1 3 -6" 
                  width="1" height="1" depth="1" 
                  material="color: #66CCFF; metalness: 0.3; roughness: 0.4; transparent: true"
                  animation="property: material.opacity; from: 1; to: 0.6; dir: alternate; loop: true; dur: 2000">
            </a-box>
        </a-entity>
        
        <!-- Objetos NO destructibles (sin la clase "destructible") -->
        <a-box id="no-destructible1" position="-4 1 -7" 
              width="1" height="1" depth="1" 
              material="color: #333333; metalness: 0.3; roughness: 0.4">
        </a-box>
        
        <a-box id="no-destructible2" position="4 1 -7" 
              width="1" height="1" depth="1" 
              material="color: #333333; metalness: 0.3; roughness: 0.4">
        </a-box>
        
        <!-- Entorno -->
        <a-plane position="0 0 -6" rotation="-90 0 0" width="20" height="20" color="#7BC8A4"></a-plane>
        <a-sky color="#ECECEC"></a-sky>
        
        <!-- Texto explicativo en el entorno 3D -->
        <a-text value="Objetos destructibles" 
                position="0 5 -6" 
                scale="1.5 1.5 1.5" 
                color="black" 
                align="center"></a-text>
        
        <a-text value="Objetos NO destructibles" 
                position="0 5 -10" 
                scale="1.2 1.2 1.2" 
                color="#333333" 
                align="center"></a-text>
                
        <!-- Iluminación -->
        <a-light type="ambient" color="#BBB"></a-light>
        <a-light type="directional" color="#FFF" intensity="0.6" position="-1 1 1"></a-light>
    </a-scene>
</body>
</html>